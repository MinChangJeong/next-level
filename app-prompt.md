# 온리원 페어(OnlyOne Fair) - "하고잡이" 앱 개발 PRD

## 1. 프로젝트 개요

**프로젝트명:** 온리원 페어 하고잡이 앱
**목적:** 사내 아이디어 박람회(OnlyOne Fair)에서 참가자들의 부스 방문, 미션 수행, 평가, 가챠 이벤트 등을 관리하는 모바일 웹/앱 서비스
**핵심 컨셉:** 참가자가 5가지 역량 미션을 달성하며 "하고잡이"로 성장하는 게이미피케이션 경험

---

## 2. 디자인 가이드라인

전체 UI/UX는 **토스(Toss) 스타일**을 기반으로 심플하고 깔끔하게 설계한다.

### 2.1 디자인 원칙

| 원칙 | 설명 |
|------|------|
| 여백 중심 레이아웃 | 콘텐츠 간 충분한 여백(padding/margin)을 확보하여 시각적 답답함을 제거한다. 카드, 섹션 간 최소 16~24px 이상의 간격을 유지한다. |
| 한 화면 한 목적 | 각 화면은 하나의 핵심 액션에 집중한다. 불필요한 정보나 부가 요소를 최소화한다. |
| 직관적 계층 구조 | 타이포그래피 크기와 굵기로 정보의 우선순위를 명확히 구분한다. 제목은 크고 굵게, 보조 텍스트는 작고 연한 색상으로 처리한다. |
| 부드러운 인터랙션 | 화면 전환, 버튼 클릭, 미션 달성 등의 상태 변화에 자연스러운 트랜지션/애니메이션을 적용한다. (예: 미션 완료 시 알 깨짐 애니메이션, 잠금 해제 모션) |
| 카드 기반 UI | 정보 단위를 둥근 모서리(border-radius 12~16px)의 카드로 그룹핑하여 가독성을 높인다. |

### 2.2 컬러 & 타이포그래피

| 항목 | 가이드 |
|------|--------|
| 배경 | 흰색(#FFFFFF) 또는 연한 그레이(#F5F6F8) |
| 텍스트 (주) | #191F28 (거의 블랙) |
| 텍스트 (보조) | #8B95A1 (미디엄 그레이) |
| 주요 액션 컬러 | 브랜드 컬러 1색 (CTA 버튼, 진행 바, 활성 상태에 사용) |
| 비활성/디스에이블 | #D1D6DB |
| 성공/완료 | #00C471 (그린 계열) |
| 폰트 | Pretendard 또는 시스템 기본 산세리프. 본문 15~16px, 제목 20~24px, 소제목 17~18px |
| 폰트 웨이트 | Regular(400), Medium(500), Bold(700) 3단계로 제한 |

### 2.3 컴포넌트 스타일

| 컴포넌트 | 스타일 |
|----------|--------|
| 버튼 (CTA) | 풀 너비, 높이 52~56px, border-radius 12px, 하단 고정(sticky bottom). 비활성 시 배경 그레이 처리 |
| 카드 | 배경 흰색, border-radius 12~16px, 미세 그림자(box-shadow) 또는 1px 보더, 내부 padding 16~20px |
| 바텀 네비게이션 | 4~5개 탭 (메인, 부스, 미션, 가챠, 내 정보). 아이콘 + 레이블, 선택 시 브랜드 컬러 |
| 토스트/스낵바 | 화면 하단에서 올라오는 형태, 2~3초 후 자동 소멸 |
| 바텀시트 | 리뷰 작성, 평가 입력 등에 활용. 드래그로 닫기 지원 |
| 프로그레스 | 미션 진척도에 알 이미지 + 하단 스텝 인디케이터 조합 |
| 리스트 아이템 | 좌측 아이콘/썸네일 + 우측 텍스트 2줄 (제목 + 설명), 최소 높이 60px |

### 2.4 화면별 디자인 참고

| 화면 | 토스 스타일 적용 포인트 |
|------|------------------------|
| 로그인 | 심플한 입력 필드 2개 + 풀 너비 CTA 버튼. 로고와 여백만으로 구성 |
| 메인 (층별 맵) | 층별 카드를 세로 스크롤로 배치. 각 카드에 층 이름 + 구역 수 + 간단 일러스트 |
| 부스 목록 | 토스 금융 상품 리스트처럼 이미지 + 제목 + 한줄 설명 카드. 방문 완료는 체크 뱃지 |
| 부스 상세 | 상단 이미지 → 제목/설명 → ONLYONE 가치 뱃지 → 댓글(제안) 섹션. 스크롤 기반 |
| 미션 페이지 | 상단에 알 이미지(중앙 정렬, 큰 사이즈) + "N/5 미션 달성" 텍스트. 하단에 미션 카드 리스트 |
| 평가 페이지 | 각 평가 항목을 카드로 분리, 알 아이콘 탭 방식의 점수 입력. 1항목씩 세로 나열 |
| 가챠 | 중앙에 가챠 머신 일러스트 + "도전하기" CTA. 결과는 바텀시트로 노출 |

---

## 3. 사용자 플로우 요약

```
로그인(사번+이름) → 인트로/온보딩(예고편 영상) → 메인(층별 공간 맵)
  ├── 부스 존 목록 → 부스 상세 → QR 인증 → 평가(6항목 점수) + 리뷰
  ├── 이벤트 존 상세
  ├── 미션 페이지 (5가지 미션 + 알 진척도)
  ├── 가챠 (굿즈 뽑기)
  ├── 포토부스 / AI 포토부스
  └── 개인 QR 표시
```

---

## 4. 기능 상세 명세

### 4.1 인증 - 로그인

| 항목 | 내용 |
|------|------|
| 입력 필드 | 사번(employee_id), 이름(name) |
| 인증 방식 | 사전 등록된 DB와 사번+이름 일치 여부 확인 (회원가입 없음) |
| 실패 처리 | "등록되지 않은 사번이거나 이름이 일치하지 않습니다" 에러 메시지 |
| 세션 유지 | 로그인 후 토큰 기반 세션 유지 (JWT 등) |

**데이터 모델 - User:**
```
User {
  employee_id: string (PK)
  name: string
  total_points: number (default: 0)
  missions_completed: number (default: 0)
  created_at: timestamp
}
```

---

### 4.2 인트로 / 온보딩

| 항목 | 내용 |
|------|------|
| 영상 | 10초 이내 예고편 영상 재생 (자동재생, 음소거 기본) |
| 핵심 질문 | 영상 내 몰입 유도용 질문 텍스트 오버레이 포함 |
| CTA 버튼 | "다음" 대신 몰입감 있는 문구 (예: "하고잡이의 여정을 시작하다", "내 안의 가능성을 깨우러 가기") |
| 스킵 | 영상 종료 전에도 CTA 버튼 클릭 가능 |
| 재방문 시 | 온보딩 스킵, 바로 메인으로 이동 |

---

### 4.3 메인 페이지 - 층별 공간 맵

메인 페이지는 온리원 페어의 물리적 공간을 층별로 구분하여 표시한다.

**층별 구성:**

| 층 | 공간명 | 하위 구역 |
|----|--------|-----------|
| B1F | 이노베이션 센터 | 손복남 홀, L01(도전존), L02(창의존) |
| 1F | 러닝 센터 | 101, 102 |
| 2F | 러닝 센터 | 성장존 |

**UI 요구사항:**
- 각 층을 탭 또는 세로 스크롤 카드 형태로 구분
- 각 구역 클릭 시 해당 존의 부스 목록 페이지로 이동
- 성장존(2F) 클릭 시 이벤트 존 상세 페이지로 이동

---

### 4.4 부스 존 목록 페이지

| 항목 | 내용 |
|------|------|
| 부스 카드 구성 | AI 생성 부스 이미지 + 부스명 + 짧은 설명 (한줄) |
| 정렬 기준 | **미방문 부스 우선** → 방문한 부스는 하단 배치 |
| 방문 표시 | 방문 완료 부스는 시각적 구분 (체크 아이콘 또는 그레이아웃) |
| 리스트 형태 | 카드 그리드 (2열) 또는 리스트형 |

**데이터 모델 - Booth:**
```
Booth {
  booth_id: string (PK)
  name: string                    // 아이디어 명
  short_description: string       // 한줄 설명
  long_description: string        // 상세 설명 (3~5줄)
  onlyone_value: string           // ONLYONE적 가치 (최초/최고/차별화)
  image_url: string               // AI 생성 부스 이미지 또는 계열사 전달 이미지
  zone: string                    // 소속 존 (L01, L02, 101, 102 등)
  floor: string                   // 소속 층 (B1F, 1F, 2F)
  visitor_count: number           // 방문 인원 수 (실시간 집계)
}
```

---

### 4.5 부스 상세 페이지

**표시 정보:**
- 아이디어 명 (제목)
- 아이디어 한줄 설명
- 아이디어 상세 설명 (3~5줄)
- ONLYONE적 가치 (최초 / 최고 / 차별화 부합 내용)
- 첨부 이미지 (계열사별 1장, 추후 확정)
- 방문 인원 카운트 표시

**댓글 기능 ('내일 더 새롭게' 미션 연동):**
- 댓글 = 아이디어 디벨롭 제안
- 입력 필드 구성:
  - 제안 사항 (최대 150자, 필수)
  - 기대 효과 (최대 50자, 필수)
- 안내 문구: **"해당 제안은 부스에 전달됩니다"** (진정성 유도)
- 댓글 작성 시 '내일 더 새롭게' 미션 진행도 +1

**데이터 모델 - Comment (제안):**
```
Comment {
  comment_id: string (PK)
  booth_id: string (FK → Booth)
  user_id: string (FK → User)
  suggestion: string              // 제안 사항 (max 150자)
  expected_effect: string         // 기대 효과 (max 50자)
  created_at: timestamp
}
```

---

### 4.6 QR 인증 & 부스 방문 처리

**플로우:**
```
사용자가 앱 내 QR 버튼 클릭
  → 개인 QR 코드 화면에 노출
  → 부스 운영자가 태블릿/스캐너로 해당 QR 촬영
  → 서버에서 방문 기록 생성
  → 사용자 앱이 실시간으로 상태 전환 (waiting → finished)
  → 해당 부스의 평가 페이지로 자동 이동
```

**QR 인증 방식:**
- PASS앱/OAuth 스타일의 상태 전환 방식
- 사용자 앱은 polling 또는 WebSocket으로 상태 감지
- QR 코드에는 user_id + 타임스탬프 + 서명 포함 (위변조 방지)

**상태 전환:**
```
IDLE → WAITING (QR 노출 시) → FINISHED (스캔 완료 시) → IDLE
```

**데이터 모델 - BoothVisit:**
```
BoothVisit {
  visit_id: string (PK)
  booth_id: string (FK → Booth)
  user_id: string (FK → User)
  status: enum (WAITING, FINISHED)
  visited_at: timestamp
  points_earned: number (default: 10)
}
```

---

### 4.7 부스 평가 페이지

QR 인증 완료 후 자동 이동되는 평가 화면.

**평가 항목 (6가지 기준):**

| 기준 | 최대 점수 |
|------|-----------|
| 최초 | 5점 |
| 최고 | 5점 |
| 차별화 | 5점 |
| 일등 | 5점 |
| 초격차 | 5점 |
| 글로벌 | 5점 |

- 각 항목은 **알(egg) 형태의 아이콘**으로 1~5점 선택 (탭하여 점수 부여)
- 평가 완료 후 **리뷰 작성 창** 표시 (선택)
  - 최소 글자수: **30자** (진정성 유도)
  - 리뷰 작성 시 '진정성 있게' 미션 진행도 +1

**데이터 모델 - Evaluation:**
```
Evaluation {
  eval_id: string (PK)
  booth_id: string (FK → Booth)
  user_id: string (FK → User)
  score_first: number (1~5)       // 최초
  score_best: number (1~5)        // 최고
  score_diff: number (1~5)        // 차별화
  score_no1: number (1~5)         // 일등
  score_gap: number (1~5)         // 초격차
  score_global: number (1~5)      // 글로벌
  total_score: number             // 합산
  created_at: timestamp
}
```

**데이터 모델 - Review:**
```
Review {
  review_id: string (PK)
  booth_id: string (FK → Booth)
  user_id: string (FK → User)
  content: string (min 30자)
  created_at: timestamp
}
```

---

### 4.8 미션 페이지

상단 알 진척도 + 하단 미션 목록을 한 화면에서 확인하는 페이지.

#### 4.8.1 알 진척도 (상단)

- 총 5단계 (0/5 → 5/5)
- 미션 하나 달성 시 단계 +1
- **알이 점점 깨져가는 이미지**로 진척도 표현
  - 0단계: 온전한 알
  - 1단계: 약간 금
  - 2단계: 금이 더 확대
  - 3단계: 반쯤 깨짐
  - 4단계: 거의 깨짐
  - 5단계: 완전히 깨짐 (하고잡이 탄생)
- 이미지 에셋 5+1개 필요

#### 4.8.2 미션 목록 (하단)

| # | 미션명 | 내용 | 초기 공개 | 공개 조건 | 완료 조건 |
|---|--------|------|-----------|-----------|-----------|
| 1 | 내일 더 새롭게 | 타 부스 아이디어 디벨롭 | ✅ 공개 | - | 제안 댓글 1회 작성 |
| 2 | 꿈을 원대하게 | 성장 ZONE 체험 | ✅ 공개 | - | 성장존 QR 스캔 |
| 3 | 반드시 결과로 | 내 부스 방문 인원 70명 이상 | ❌ 비공개 | 부스 방문 인원 30명 이상 등록 시 | 방문 인원 70명 이상 달성 |
| 4 | 안돼도 다시 | 가챠 2회 도전 | ❌ 비공개 | 최초 1회 가챠 도전 시 | 가챠 2회 도전 완료 |
| 5 | 진정성 있게 | 리뷰 12개 작성 | ❌ 비공개 | 부스에 최초 1회 리뷰 남기기 시 | 리뷰 12개 작성 완료 |

**비공개 미션 UI:**
- 미공개 미션은 잠금 아이콘 + "???" 또는 블러 처리
- 공개 조건 달성 시 잠금 해제 애니메이션 + 미션 내용 표시
- '반드시 결과로' 공개 시: "부스 방문 인원 N명 이상일 때 미션 성공!" 문구 표시
- '반드시 결과로' 70명 달성 시 자동 미션 클리어 도장 처리
- **플랜B (반드시 결과로):** 처음부터 공개 상태로 운영 가능하도록 admin 설정 토글

**데이터 모델 - UserMission:**
```
UserMission {
  user_id: string (FK → User)
  mission_id: string (1~5)
  is_unlocked: boolean            // 공개 여부
  is_completed: boolean           // 완료 여부
  progress: number                // 현재 진행도
  target: number                  // 목표치
  unlocked_at: timestamp | null
  completed_at: timestamp | null
}
```

---

### 4.9 성장 ZONE (꿈을 원대하게)

**사용자 동선:**
```
줄 서기 (일자/지그재그)
  → 줄에 배치된 QR코드로 질문 미리 보기 (사색 시간)
  → 역경&성장 디지털 구조물 체험
    → 실패 문구 작성 (작성 후 화면에서 소멸 애니메이션)
    → 성장 문구 작성 (기록 저장)
  → 느린 편지함으로 이동 → 편지 작성
  → 가벽 쪽 QR 코드 스캔 → 미션 완료
```

**질문 예시 (사색용):**
- "준비하는 과정에서 내가 가졌던 고집이나 편견이 깨졌던 순간이 있었나요?"
- "포기하고 싶던 순간, 나를 다시 일으켜 세운 건 동료의 말이었나요, 아니면 스스로에 대한 오기였나요?"
- "동료와의 소통에서 가장 힘들었던 순간은?"

**데이터 모델 - GrowthZoneEntry:**
```
GrowthZoneEntry {
  entry_id: string (PK)
  user_id: string (FK → User)
  failure_text: string            // 실패 문구 (소멸 전 저장 optional)
  growth_text: string             // 성장 문구
  slow_letter: string             // 느린 편지 내용 (optional)
  completed_at: timestamp
}
```

---

### 4.10 가챠 시스템 (안돼도 다시)

| 항목 | 내용 |
|------|------|
| 1회 비용 | 40 포인트 |
| 인당 최대 | 2회 |
| 굿즈 종류 | 4종류 |
| 굿즈 수량 | 종류당 150개 |
| 굿즈 단가 | 종류당 ~5,000원 |
| 총 예산 | 300만원 (인당 1만원) |

**플로우:**
```
가챠 버튼 클릭
  → 포인트 잔액 확인 (40p 이상 필요)
  → 도전 횟수 확인 (2회 미만 필요)
  → 포인트 차감 (40p)
  → 가챠 애니메이션 재생
  → 랜덤 굿즈 결과 표시
  → 재고 차감
  → 1회차 완료 시: '안돼도 다시' 미션 공개 (공개 조건 달성)
  → 2회차 완료 시: '안돼도 다시' 미션 완료
```

**데이터 모델 - GachaAttempt:**
```
GachaAttempt {
  attempt_id: string (PK)
  user_id: string (FK → User)
  goods_id: string (FK → Goods)
  points_spent: number (40)
  attempt_number: number (1 or 2)
  created_at: timestamp
}

Goods {
  goods_id: string (PK)
  name: string
  image_url: string
  total_stock: number
  remaining_stock: number
  unit_price: number
}
```

---

### 4.11 포인트 시스템

| 활동 | 포인트 |
|------|--------|
| 부스 방문 (QR 인증) | +10p / 부스당 |
| 가챠 1회 | -40p |
| 포토부스 | -10p |
| AI 포토부스 (올네) | -10p |

**포인트 계산:**
- 현실적 최대 획득: 240p (부스 24개 × 10p 기준)
- 진정성 있는 완료 시 최소: 120p
- 최대 소진: 80p (가챠 2회) + 20p (포토부스 2종) = 100p

---

### 4.12 이벤트 존 상세 페이지

각 이벤트 존의 정보를 제공하는 페이지.

**표시 정보:**
- 이벤트 존 이름
- 위치 정보 (층, 구역)
- 이벤트 내용 상세 설명
- 참여 방법 안내

---

### 4.13 포토부스 / AI 포토부스

| 항목 | 포토부스 | AI 포토부스 (올네) |
|------|----------|-------------------|
| 비용 | 10p | 10p |
| 차감 방식 | 입장 시 자동 차감 | 입장 시 자동 차감 |

---

### 4.14 1등 부스 선정 로직

**프로세스 (2안):**
1. 최초·최고·차별화·일등·초격차·글로벌 6항목으로 정량 평가 (기본)
2. 개인별 총합 점수가 가장 높았던 부스를 시스템이 자동 취합 → 1인 = 1표
3. 표가 가장 많은 부스가 1등 (별도 투표 과정 없음)

**구현:**
```
1. 각 유저의 Evaluation 중 total_score가 가장 높은 booth_id 추출
2. booth_id별 count 집계
3. count 최대 부스 = 1등
```

---

## 5. 화면(페이지) 목록

| # | 화면명 | 경로 (예시) | 설명 |
|---|--------|-------------|------|
| 1 | 로그인 | `/login` | 사번 + 이름 입력 |
| 2 | 인트로/온보딩 | `/intro` | 예고편 영상 + CTA |
| 3 | 메인 (층별 맵) | `/main` | B1F / 1F / 2F 층별 공간 |
| 4 | 부스 존 목록 | `/zone/:zoneId` | 부스 카드 리스트 |
| 5 | 부스 상세 | `/booth/:boothId` | 아이디어 상세 + 댓글(제안) |
| 6 | 개인 QR 표시 | `/qr` | 방문 인증용 개인 QR |
| 7 | 평가 페이지 | `/evaluate/:boothId` | 6항목 점수 + 리뷰 |
| 8 | 미션 페이지 | `/missions` | 알 진척도 + 5가지 미션 |
| 9 | 가챠 페이지 | `/gacha` | 가챠 도전 + 결과 |
| 10 | 성장존 체험 | `/growth-zone` | 실패/성장 문구 + 느린 편지함 |
| 11 | 이벤트 존 상세 | `/event/:eventId` | 이벤트 위치 + 상세 |
| 12 | 포토부스 | `/photobooth` | 포토부스 입장/포인트 차감 |
| 13 | 관리자 대시보드 | `/admin` | 부스별 방문수, 미션 통계, 굿즈 재고 등 |

---

## 6. API 엔드포인트 설계 (예시)

### Auth
```
POST /api/auth/login          { employee_id, name } → { token, user }
```

### Booth
```
GET  /api/booths                            → 전체 부스 목록 (방문 여부 포함)
GET  /api/booths/:boothId                   → 부스 상세
GET  /api/booths/:boothId/comments          → 제안 댓글 목록
POST /api/booths/:boothId/comments          → 제안 댓글 작성
GET  /api/booths/:boothId/visitor-count     → 방문 인원 수
```

### QR & Visit
```
GET  /api/qr/my                             → 개인 QR 데이터 생성
POST /api/visits/scan                       → QR 스캔 처리 (부스 운영자 측)
GET  /api/visits/status/:sessionId          → 방문 상태 조회 (polling/WS)
```

### Evaluation & Review
```
POST /api/evaluations                       → 평가 제출
POST /api/reviews                           → 리뷰 작성
GET  /api/reviews/my                        → 내 리뷰 목록
```

### Mission
```
GET  /api/missions                          → 미션 현황 (공개여부 + 진행도)
POST /api/missions/:missionId/complete      → 미션 완료 처리 (성장존 QR 등)
```

### Gacha
```
POST /api/gacha/attempt                     → 가챠 도전
GET  /api/gacha/history                     → 내 가챠 이력
GET  /api/gacha/stock                       → 굿즈 재고 현황
```

### Points
```
GET  /api/points/my                         → 내 포인트 잔액 + 이력
POST /api/points/deduct                     → 포인트 차감 (포토부스 등)
```

### Admin
```
GET  /api/admin/dashboard                   → 전체 통계
GET  /api/admin/booths/ranking              → 1등 부스 선정 결과
PATCH /api/admin/missions/:missionId/config → 미션 공개 설정 (플랜B 토글)
```

---

## 7. 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 동시 접속 | 최소 300명 동시 접속 지원 |
| QR 인증 응답 | 3초 이내 상태 전환 |
| 모바일 최적화 | 모바일 웹 우선 (반응형, PWA 권장) |
| 실시간성 | 부스 방문 인원 카운트 실시간 반영 (WebSocket 또는 short polling) |
| 가챠 동시성 | 재고 차감 시 race condition 방지 (DB 트랜잭션/락) |
| 보안 | QR 위변조 방지 (서명 검증), 가챠 조작 방지 |
| 관리자 | 부스별 통계, 미션 공개 토글, 굿즈 재고 관리 기능 |

---

## 8. 핵심 비즈니스 로직 정리

### 미션 자동 공개 로직
```
[반드시 결과로] → 내 부스 방문 인원 ≥ 30명 → 미션 공개
[안돼도 다시]   → 가챠 1회 도전 → 미션 공개
[진정성 있게]   → 리뷰 1회 작성 → 미션 공개
```

### 미션 자동 완료 로직
```
[내일 더 새롭게] → 제안 댓글 1회 작성 → 완료
[꿈을 원대하게] → 성장존 QR 스캔 → 완료
[반드시 결과로] → 내 부스 방문 인원 ≥ 70명 → 자동 완료 (도장)
[안돼도 다시]   → 가챠 2회 도전 → 완료
[진정성 있게]   → 리뷰 12개 작성 → 완료
```

### 1등 부스 선정
```
각 유저의 최고 평가 부스 → 1인 1표 자동 집계 → 최다 득표 부스 = 1등
```